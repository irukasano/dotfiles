#!/usr/bin/env bash
set -euo pipefail

pid_file="/tmp/md-preview-serve-${USER}.pid"
if [[ ! -f "${pid_file}" ]]; then
  echo "Not running (no pid file)."
  exit 0
fi
pid="$(cat "${pid_file}" || true)"
if [[ -n "${pid}" ]] && kill -0 "${pid}" 2>/dev/null; then
  kill "${pid}"
  echo "Stopped (pid=${pid})."
else
  echo "Not running (stale pid=${pid})."
fi
rm -f "${pid_file}"

